<!DOCTYPE html>
<html>
<head>
    <title>EduAI | Smart Course Recommendation</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
        body {
            height:100vh;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display:flex;
            justify-content:center;
            align-items:center;
        }
        .card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(15px);
            padding:40px;
            width:420px;
            border-radius:20px;
            box-shadow:0 15px 35px rgba(0,0,0,0.2);
            text-align:center;
            color:white;
        }
        input {
            width:100%;
            padding:12px;
            border-radius:10px;
            border:none;
            margin-bottom:15px;
            font-size:15px;
        }
        button {
            width:100%;
            padding:12px;
            border-radius:10px;
            border:none;
            background:white;
            color:#764ba2;
            font-weight:600;
            cursor:pointer;
        }
        #result { margin-top:20px; }
        .result-box {
            padding:15px;
            background:rgba(255,255,255,0.2);
            border-radius:12px;
        }
    </style>
</head>

<body>

<div class="card">
    <h1>ðŸŽ“ EduAI</h1>
    <p>AI Course Recommendation Engine</p>

    <input type="number" id="age" placeholder="Age">
    <input type="number" id="attendance" placeholder="Attendance %">
    <input type="number" id="marks" placeholder="Marks">

    <button onclick="getRecommendation()">Generate AI Recommendation</button>

    <div id="result"></div>
</div>

<script>
async function getRecommendation() {

    const age = parseInt(document.getElementById("age").value);
    const attendance = parseFloat(document.getElementById("attendance").value);
    const marks = parseFloat(document.getElementById("marks").value);

    if (!age || !attendance || !marks) {
        alert("Please fill all fields");
        return;
    }

    try {
        const response = await fetch("/students/predict", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                age: age,
                attendance: attendance,
                marks: marks
            })
        });

        const data = await response.json();

        if (!response.ok) {
            document.getElementById("result").innerHTML =
                `<div class="result-box">${JSON.stringify(data.detail)}</div>`;
            return;
        }

        document.getElementById("result").innerHTML =
            `<div class="result-box">
                <strong>Recommended Course:</strong> ${data.predicted_course}<br>
                <strong>Confidence:</strong> ${data.confidence_percentage}%
            </div>`;

    } catch (error) {
        document.getElementById("result").innerHTML =
            `<div class="result-box">Server error</div>`;
    }
}
</script>

</body>
</html>